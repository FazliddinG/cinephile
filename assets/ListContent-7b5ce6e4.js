import{r as D,b as z,o as a,d as S,w as E,e as R,f as y,u as m,i as V,t as f,g as i,h as b,c as s,a as L,j as g,F as w,k as x,n as C,l as j,m as F,p as I,q}from"./index-4a7c65ab.js";const O={alt:"",class:"list-content__img"},U={class:"list-content__name"},A={__name:"ListItem",props:{type:String,item:Object},setup(l){return(P,c)=>{const v=D("router-link"),u=z("lazy");return a(),S(v,{to:`/${l.type}/${l.item.id}`,class:"list-content__item"},{default:E(()=>[R(y("img",O,null,512),[[u,m(V)+l.item.poster_path]]),y("h3",U,f(l.item.title||l.item.name),1)]),_:1},8,["to"])}}},G={class:"pagin__menu"},H=["onClick"],J=["onClick"],K=["onClick"],B={__name:"Pagination",props:{top:Boolean,currentPage:Number,totalPage:Number},emits:["emitPage"],setup(l,{emit:P}){const c=l,v=i(null),u=i(null),r=i(null),_=i(null),d=i(null),k=i(null),h=i(null);function p(t){let e=c.totalPage;v.value=e>t?t+1:null,u.value=t-1,r.value=t-3>1?t-3:null,_.value=t+3<e?t+3:null,d.value=r.value?[1,2]:t==4?[1,2,3,4,5]:[1,2,3,4],k.value=_.value?[e--,e].reverse():t==e-3?[e--,e--,e--,e--,e].reverse():[e--,e--,e--,e].reverse(),h.value=r.value&&_.value?[t-1,t,t+1]:null}p(c.currentPage);function o(t){p(t),P("emitPage",t)}return b(()=>c.currentPage,()=>{p(c.currentPage)}),b(()=>c.totalPage,()=>{p(c.currentPage)}),(t,e)=>{const $=D("font-awesome-icon");return a(),s("div",{class:C(["pagin",{pagin_top:l.top}])},[y("ul",G,[u.value?(a(),s("li",{key:0,class:"pagin__btn",onClick:e[0]||(e[0]=n=>o(u.value))},[L($,{icon:["fas","chevron-left"]})])):g("",!0),d.value?(a(!0),s(w,{key:1},x(d.value,n=>(a(),s("li",{class:C(["pagin__num",{active:n==l.currentPage}]),key:n,onClick:N=>o(n)},f(n),11,H))),128)):g("",!0),r.value?(a(),s("li",{key:2,class:"pagin__num",onClick:e[1]||(e[1]=n=>o(r.value))},"...")):g("",!0),h.value?(a(!0),s(w,{key:3},x(h.value,n=>(a(),s("li",{class:C(["pagin__num",{active:n==l.currentPage}]),key:n,onClick:N=>o(n)},f(n),11,J))),128)):g("",!0),_.value?(a(),s("li",{key:4,class:"pagin__num",onClick:e[2]||(e[2]=n=>o(_.value))},"...")):g("",!0),k.value?(a(!0),s(w,{key:5},x(k.value,n=>(a(),s("li",{class:C(["pagin__num",{active:n==l.currentPage}]),key:n,onClick:N=>o(n)},f(n),11,K))),128)):g("",!0),v.value?(a(),s("li",{key:6,class:"pagin__btn",onClick:e[3]||(e[3]=n=>o(v.value))},[L($,{icon:["fas","chevron-right"]})])):g("",!0)])],2)}}},M={class:"container list-content"},Q={class:"list-content__title"},T={class:"list-content__wrapper"},W={key:0,class:"loading"},X=y("div",{class:"loading__spiner"},null,-1),Y=[X],ee={__name:"ListContent",props:{type:String},setup(l){const P=l,c=j(),v=F();let u=I(),r=i(1),_=i(!1),d=i([]),k=q(()=>u.maxPage);async function h(t=1){_.value=!0,r.value=t,await u.getPopular(P.type,r.value);let e=P.type=="movie"?u.moviesList:u.tvsList;d.value=e,_.value=!1}const p=q(()=>v.query.page&&!isNaN(v.query.page)?+v.query.page:1);function o(t=1){c.push({path:`/${P.type}`,query:{page:t}}),h(t)}return o(p.value),(t,e)=>(a(),s("div",M,[y("h2",Q,f(l.type=="movie"?"Все фильмы":"Все сериалы"),1),L(B,{top:!0,currentPage:m(r),onEmitPage:o,totalPage:m(k)},null,8,["currentPage","totalPage"]),y("div",T,[(a(!0),s(w,null,x(m(d),($,n)=>(a(),S(A,{key:n,type:l.type,item:$},null,8,["type","item"]))),128))]),m(_)?(a(),s("div",W,Y)):g("",!0),L(B,{currentPage:m(r),onEmitPage:o,totalPage:m(k)},null,8,["currentPage","totalPage"])]))}};export{ee as _};
